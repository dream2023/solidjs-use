import{O as c,_ as b,d as l}from"./Observable-551bfbb9.js";import{c as d,d as u,f as m,a as v,S as y,i as I,b as g}from"./mapTo-85b7d1a8.js";function a(t){return t&&typeof t.schedule=="function"}function N(t,e){return e?u(t,e):new c(d(t))}function S(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return a(r)?(t.pop(),u(t,r)):N(t)}function f(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof e=="function"?function(n){return n.pipe(f(function(s,i){return m(t(s,i)).pipe(v(function(p,h){return e(s,p,i,h)}))},r))}:(typeof e=="number"&&(r=e),function(n){return n.lift(new x(t,r))})}var x=function(){function t(e,r){r===void 0&&(r=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=r}return t.prototype.call=function(e,r){return r.subscribe(new M(e,this.project,this.concurrent))},t}(),M=function(t){b(e,t);function e(r,n,s){s===void 0&&(s=Number.POSITIVE_INFINITY);var i=t.call(this,r)||this;return i.project=n,i.concurrent=s,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return e.prototype._next=function(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)},e.prototype._tryNext=function(r){var n,s=this.index++;try{n=this.project(r,s)}catch(i){this.destination.error(i);return}this.active++,this._innerSub(n)},e.prototype._innerSub=function(r){var n=new y(this),s=this.destination;s.add(n);var i=I(r,n);i!==n&&s.add(i)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(g);function O(t){return t===void 0&&(t=Number.POSITIVE_INFINITY),f(l,t)}function T(){return O(1)}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return T()(S.apply(void 0,t))}function w(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return a(r)?(t.pop(),function(n){return o(t,n,r)}):function(n){return o(t,n)}}export{w as s};
