import{w as E}from"./index-c2911367.js";import{r as d,q as O}from"./index-dae16e14.js";import{u as y}from"./index-d2261c90.js";function j(i="history",p={}){const{initialValue:o={},removeNullishValues:m=!0,removeFalsyValues:$=!1,write:w=!0,window:a=O}=p;if(!a)return d(o);const s=d({});function g(){if(i==="history")return a.location.search||"";if(i==="hash"){const t=a.location.hash||"",e=t.indexOf("?");return e>0?t.slice(e):""}return(a.location.hash||"").replace(/^#/,"")}function S(t){const e=t.toString();if(i==="history")return`${e?`?${e}`:""}${a.location.hash||""}`;if(i==="hash-params")return`${a.location.search||""}${e?`#${e}`:""}`;const r=a.location.hash||"#",n=r.indexOf("?");return n>0?`${r.slice(0,n)}${e?`?${e}`:""}`:`${r}${e?`?${e}`:""}`}function c(){return new URLSearchParams(g())}function l(t){const e=new Set(Object.keys(s));for(const r of t.keys()){const n=t.getAll(r);s[r]=n.length>1?n:t.get(r)??"",e.delete(r)}Array.from(e).forEach(r=>delete s[r])}const{pause:b,resume:x}=E(s,()=>{const t=new URLSearchParams("");Object.keys(s).forEach(e=>{const r=s[e];Array.isArray(r)?r.forEach(n=>t.append(e,n)):m&&r==null||$&&!r?t.delete(e):t.set(e,r)}),u(t)},{defer:!1});function u(t,e){b(),e&&l(t),a.history.replaceState(a.history.state,a.document.title,a.location.pathname+S(t)),x()}function f(){w&&u(c(),!0)}y(a,"popstate",f,!1),i!=="history"&&y(a,"hashchange",f,!1);const h=c();return h.keys().next().value?l(h):Object.assign(s,o),s}export{j as u};
