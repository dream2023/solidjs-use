import{w as P}from"./index-7fe291eb.js";import{r as y,p as v}from"./index-66786029.js";import{u as m}from"./index-fcbdd517.js";function R(a="history",$={}){const{initialValue:c={},removeNullishValues:g=!0,removeFalsyValues:w=!1,write:S=!0,window:s=v}=$;if(!s)return y(c);const[i,l]=y({});function x(){if(a==="history")return s.location.search||"";if(a==="hash"){const r=s.location.hash||"",e=r.indexOf("?");return e>0?r.slice(e):""}return(s.location.hash||"").replace(/^#/,"")}function b(r){const e=r.toString();if(a==="history")return`${e?`?${e}`:""}${s.location.hash||""}`;if(a==="hash-params")return`${s.location.search||""}${e?`#${e}`:""}`;const n=s.location.hash||"#",t=n.indexOf("?");return t>0?`${n.slice(0,t)}${e?`?${e}`:""}`:`${n}${e?`?${e}`:""}`}function u(){return new URLSearchParams(x())}function f(r){const e=new Set(Object.keys(i()));l(({...n})=>{for(const t of r.keys()){const o=r.getAll(t);n[t]=o.length>1?o:r.get(t)??"",e.delete(t)}return Array.from(e).forEach(t=>delete n[t]),n})}const{pause:E,resume:O}=P(i,r=>{const e=new URLSearchParams("");Object.keys(r).forEach(n=>{const t=r[n];Array.isArray(t)?t.forEach(o=>e.append(n,o)):g&&t==null||w&&!t?e.delete(n):e.set(n,t)}),setTimeout(()=>{h(e)})},{defer:!1});function h(r,e){E(),e&&f(r),s.history.replaceState(s.history.state,s.document.title,s.location.pathname+b(r)),O()}function d(){S&&h(u(),!0)}m(s,"popstate",d,!1),a!=="history"&&m(s,"hashchange",d,!1);const p=u();return p.keys().next().value?f(p):Object.assign(i,c),[i,l]}export{R as u};
